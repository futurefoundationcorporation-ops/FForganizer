Quero que vocÃª configure meu projeto mantendo TODOS os arquivos que jÃ¡ estÃ£o no GitHub â€” nÃ£o remova nada.
Preciso que vocÃª implemente um sistema de autenticaÃ§Ã£o por CHAVE, com as seguintes regras:

âœ… 1. Master Key

Eu terei uma Ãºnica MASTER_KEY (jÃ¡ existe no projeto).

Quando o usuÃ¡rio digita a MASTER_KEY no login:

Ele Ã© autenticado como ADMIN.

Ele pode acessar a rota /admin.

Ele pode criar, visualizar e excluir outras chaves de acesso.

âœ… 2. Chaves normais

Criadas apenas por administradores.

Salvas na tabela access_keys jÃ¡ existente.

Cada chave:

Tem id, key, label, created_by, created_at.

DÃ¡ acesso ao sistema, mas nÃ£o Ã© admin.

Quando um usuÃ¡rio entra com uma chave normal:

Ele acessa apenas sua Ã¡rea normal.

NÃ£o tem acesso ao painel admin.

âœ… 3. Login sem email e sem senha

Substituir completamente o sistema tradicional Supabase Auth:

O login serÃ¡ apenas uma caixa de texto:
"Digite sua chave para entrar"

UsuÃ¡rios nÃ£o precisam ter email nem senha.

O login deve validar assim:

âœ”ï¸ Se chave == MASTER_KEY

â†’ Autenticar como Admin

âœ”ï¸ Se chave estÃ¡ em access_keys

â†’ Autenticar como usuÃ¡rio comum

âŒ Caso contrÃ¡rio

â†’ Login invÃ¡lido

âœ… 4. SessÃ£o / Estado

O sistema deve manter a sessÃ£o assim:

localStorage.setItem("access_key", "...chave...")


E o hook de autenticaÃ§Ã£o deve funcionar assim:

if (key === MASTER_KEY) isAdmin = true
else if (key in access_keys) isAdmin = false
else logout

âœ… 5. Supabase ConsideraÃ§Ãµes

NÃ£o quero usar Supabase Auth.
Mas quero manter a estrutura das tabelas com user_id.

Portanto:

âœ”ï¸ Criar um "usuÃ¡rio fantasma" no auth.users

ID fixo, por exemplo:

ffffffff-ffff-ffff-ffff-ffffffffffff


Usado como user_id para todos os dados criados por qualquer chave.

âœ”ï¸ Policies devem ignorar auth.uid() e usar sempre esse ID fixo

Ou seja:

auth.uid() = 'ffffffff-ffff-ffff-ffff-ffffffffffff'

âœ… 6. Manter TODAS as funcionalidades jÃ¡ existentes

NÃ£o remover nada.
Apenas adicionar:

Login por chave

VerificaÃ§Ã£o de admin

Carregamento da MASTER_KEY e chaves normais

Painel admin para gerar e excluir chaves

SessÃµes persistentes

âœ… 7. Arquivos que precisam ser criados/alterados

Criar ou atualizar:

/src/pages/Login.jsx

/src/hooks/useAuth.js (ou semelhante)

/src/hooks/useAdmin.js (jÃ¡ existe)

/src/utils/keyValidator.js

/src/pages/Admin.jsx

/src/components/AdminPanel.jsx

ğŸ“Œ O Login.jsx deve ser assim:

Input: â€œDigite sua chaveâ€

BotÃ£o: Entrar

Ao clicar:

Verificar MASTER_KEY

Verificar access_keys

Salvar sessÃ£o

Redirecionar para dashboard

ğŸ“Œ O useAuth() deve:

Ler key do localStorage

Validar admin ou user

Se chave invÃ¡lida â†’ logout automÃ¡tico

ğŸ“Œ O useAdmin() deve:

Apenas retornar:

return isAdmin === true

ğŸ“Œ IMPORTANTE

NÃ£o quero que o sistema use:

signUp

signIn

magic link

OAuth

email

senha

Apenas CHAVES.

ğŸ”¥ Resultado esperado

Ao final, quero:

âœ” Sistema 100% funcionando via login por chave
âœ” Painel /admin acessÃ­vel apenas pela MASTER KEY
âœ” UsuÃ¡rios comuns sÃ³ entram com chaves geradas
âœ” Nenhum arquivo removido
âœ” Toda funcionalidade atual preservada
âœ” Supabase funcionando sem Auth tradicional