Tarefa: quero que vocÃª prepare o projeto completo com o sistema de admin, geraÃ§Ã£o de chaves e painel exclusivo, usando meu Supabase jÃ¡ configurado no vercel.json que enviei.
O resultado final deve ser um projeto completo, pronto para deploy na Vercel, incluindo uma chave mestra gerada automaticamente e mostrada para mim ao final.

âœ… O QUE VOCÃŠ DEVE ENTREGAR

Quero:

1. Sistema de administrador

Criar a tabela admins no Supabase

Inserir meu user_id como admin

Criar policies para permitir que somente admins acessem a tabela

Criar um hook React useAdmin() que detecta se o usuÃ¡rio logado Ã© admin

2. Sistema de geraÃ§Ã£o e gerenciamento de chaves

Criar:

ğŸ“Œ Tabela
create table access_keys (
  id uuid primary key default gen_random_uuid(),
  key text not null,
  label text,
  created_by uuid references auth.users(id),
  created_at timestamp default now()
);

ğŸ“Œ Policies:

Permitir apenas admins:

create policy "admins only" on access_keys
for all
using (auth.uid() in (select user_id from admins));

ğŸ“Œ UI:

Criar pÃ¡gina /admin

Criar componente "Painel Admin"

Criar botÃ£o "Gerar nova chave"

Apenas admins devem ver esse botÃ£o

Criar listagem de todas as chaves criadas (somente para admin)

Criar botÃ£o de copiar chave

ğŸ“Œ Endpoint:

Criar /api/generate-key.js (Vercel + Supabase service_role)

O endpoint deve:

gerar uma chave aleatÃ³ria segura (crypto.randomUUID() + random bytes)

salvar no Supabase

retornar para mim a chave gerada

3. Chave mestra (root key)

Crie tambÃ©m uma chave mestra, chamada MASTER_KEY, que serÃ¡:

salva na tabela access_keys com label "master"

retornada para mim no final da execuÃ§Ã£o (somente uma vez)

criada usando alta entropia

Exemplo:

MASTER-KEY-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

4. IntegraÃ§Ã£o com meu Supabase

Usar automaticamente as variÃ¡veis jÃ¡ presentes no meu vercel.json que eu enviei junto ao projeto.

Seguir esta configuraÃ§Ã£o:

import { createClient } from "@supabase/supabase-js";

export const supabase = createClient(
  import.meta.env.VITE_SUPABASE_URL,
  import.meta.env.VITE_SUPABASE_ANON_KEY
);


E para o endpoint admin:

process.env.SUPABASE_SERVICE_ROLE_KEY

5. Garantir que o projeto entregue esteja pronto para Vercel

build: npm run build

output: dist

sem referÃªncias a secrets inexistentes

sem blocos "env" invÃ¡lidos no vercel.json

ğŸš€ O QUE VOCÃŠ PRECISA ME ENTREGAR AO FINAL

Todo o projeto funcionando

SQL completo jÃ¡ aplicado

Hook useAdmin()

PÃ¡gina /admin

BotÃ£o Gerar Chave

Endpoint /api/generate-key.js

A lista de chaves funcionando

A CHAVE MESTRA (MASTER_KEY) gerada automaticamente

InstruÃ§Ãµes finais de deploy

âš ï¸ IMPORTANTE

VocÃª jÃ¡ terÃ¡ acesso ao arquivo vercel.json contendo minhas credenciais da API Supabase.
Use esse arquivo para configurar tudo automaticamente.

Por favor, entregue o projeto COMPLETO, totalmente integrado, 100% pronto para deploy.
E lembre-se: me devolva a MASTER_KEY ao final.
â€” END PROMPT â€”