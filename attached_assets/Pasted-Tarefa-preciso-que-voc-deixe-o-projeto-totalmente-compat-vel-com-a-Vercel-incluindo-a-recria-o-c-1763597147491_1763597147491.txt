Tarefa: preciso que voc√™ deixe o projeto totalmente compat√≠vel com a Vercel, incluindo a recria√ß√£o completa do arquivo vercel.json, configura√ß√£o das vari√°veis de ambiente e ajustes necess√°rios para deploy imediato.
J√° estou enviando abaixo as minhas chaves Supabase ‚Äî voc√™ deve integr√°-las corretamente.

üìå O QUE VOC√ä DEVE FAZER
1. Criar um vercel.json 100% compat√≠vel com Vite + React

Crie exatamente assim:

{
  "rewrites": [
    { "source": "/(.*)", "destination": "/index.html" }
  ],
  "buildCommand": "npm run build",
  "outputDirectory": "dist",
  "framework": "vite"
}


‚ö†Ô∏è IMPORTANTE:
N√ÉO adicione "env": {} dentro do vercel.json.
As vari√°veis ser√£o configuradas somente na dashboard da Vercel.

2. Configurar o Supabase usando as chaves abaixo

Aqui est√£o minhas chaves:

üîπ VITE_SUPABASE_URL
https://bbdswisceqpeqzjrzrik.supabase.co

üîπ VITE_SUPABASE_ANON_KEY
eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJiZHN3aXNjZXFwZXF6anJ6cmlrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM1ODk4NzIsImV4cCI6MjA3OTE2NTg3Mn0.pcETfyDQvKEY-qPtOg544ngOqkNxJbScIdyRDlFghWs

üîπ SUPABASE_SERVICE_ROLE_KEY
eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJiZHN3aXNjZXFwZXF6anJ6cmlrIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MzU4OTg3MiwiZXhwIjoyMDc5MTY1ODcyfQ.zGHglrzYy5atNZYLlo_tYBElnVY85THtHM6_iy-f7cU

Ajustar supabaseClient.js
import { createClient } from '@supabase/supabase-js';

export const supabase = createClient(
  import.meta.env.VITE_SUPABASE_URL,
  import.meta.env.VITE_SUPABASE_ANON_KEY
);

Ajustar endpoints /api/*

Use o service_role apenas aqui (backend):

import { createClient } from '@supabase/supabase-js';

export const supabaseAdmin = createClient(
  process.env.VITE_SUPABASE_URL,
  process.env.SUPABASE_SERVICE_ROLE_KEY
);

3. Garantir compatibilidade total com Serverless Functions da Vercel

Verificar que /api/* est√° usando ECMAScript Modules (export default)

Garantir que todas as respostas s√£o JSON v√°lidas

Corrigir imports quebrados

Retirar qualquer refer√™ncia incorreta do service_role no frontend

4. Validar todo o sistema ADMIN na UI

Validar:

‚úî /admin funciona
‚úî useAdmin() detecta corretamente admins
‚úî O bot√£o Shield aparece apenas para admins
‚úî Painel Admin renderiza 100% no ambiente Vercel
‚úî CRUD de access_keys funcionando
‚úî MASTER KEY vis√≠vel apenas para admins
‚úî Prote√ß√£o contra usu√°rios normais confirmada

5. Entregar o projeto FINAL, pronto para deploy

Voc√™ deve devolver:

vercel.json corrigido

Todas as chaves integradas

Projeto funcionando 100% no modo produ√ß√£o

Endpoints /api funcionando

Compatibilidade total com Vercel

Zero secrets inv√°lidos

C√≥digo limpo e organizado

üöÄ ME ENTREGUE TAMB√âM

Confirma√ß√£o de onde inserir as vari√°veis no Vercel
(Settings ‚Üí Environment Variables)

Confirma√ß√£o de que o build roda com:

npm run build


Confirma√ß√£o de que o deploy vai funcionar sem erros

üîê MINHAS CHAVES SUPABASE (USE-AS NO PROJETO)

VITE_SUPABASE_URL
https://bbdswisceqpeqzjrzrik.supabase.co

VITE_SUPABASE_ANON_KEY
eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJiZHN3aXNjZXFwZXF6anJ6cmlrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM1ODk4NzIsImV4cCI6MjA3OTE2NTg3Mn0.pcETfyDQvKEY-qPtOg544ngOqkNxJbScIdyRDlFghWs

SUPABASE_SERVICE_ROLE_KEY
eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJiZHN3aXNjZXFwZXF6anJ6cmlrIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MzU4OTg3MiwiZXhwIjoyMDc5MTY1ODcyfQ.zGHglrzYy5atNZYLlo_tYBElnVY85THtHM6_iy-f7cU

Por favor, fa√ßa tudo acima e me entregue o projeto completamente compat√≠vel com Vercel, pronto para deploy.